{% extends "teacher-base.html" %}
{% load staticfiles %}
    {% block css-files %}
    <style>
    </style>
    <!--<link rel="stylesheet" type="text/css" href="http://medialize.github.io/jQuery-contextMenu/src/jquery.contextMenu.css" />-->
    {% endblock %}
    {% block content %}

<!--<form action="" method="post">{% csrf_token %}
	    {{ form.as_p }}
	    <input type="submit" value="Save" />
	</form> -->

	<div class="button-group">
		<button type="button" class="btn btn-default mode-btn glyphicon glyphicon-plus" id="ADD">Add</button>
		<button type="button" class="btn btn-default mode-btn glyphicon glyphicon-move" id="MOVE">Move</button>
		<button type="button" class="btn btn-default mode-btn glyphicon glyphicon-log-in" id="CONNECT">Connect</button>
		<button type="button" class="btn btn-default mode-btn glyphicon glyphicon-erase" id="ERASE">Eraser</button>
		<button type="button" class="btn btn-default mode-btn glyphicon glyphicon-hand-up" id="INSPECT">Inspector</button>
		<button type="button" class="btn btn-default glyphicon glyphicon-import" id="SAVE" onchange="saveScenario">Save</button>
	</div>

	<div id="container" class="col-md-10">
		<div id="graph"></div>
	</div>

	<!-- Modal -->
	<div class="modal fade" id="activityForm" tabindex="-1" role="dialog" data-backdrop="static">
	  <div class="modal-dialog" role="document">
	    <div class="modal-content">
	      <div class="modal-body">
	      	<label>Activity</label>
	      	<select id="activitySelector" class="form-control">
				<option value="choose" href="#">Choose an activity...</option>
{% for act in activities %}
				<option value="{{act.pk}}" href="#">{{ act.name }}</option>
{% endfor %}
				<option value="other" href="#">Other</option>
			</select>
			
			<div id="newActivityForm" style="display: none;">
				<div class="form-group">
				    <label for="newActivityName">Name</label>
				    <input type="text" class="form-control" id="newActivityName" maxlength="20" placeholder="20 characters maximum">
				</div>
				<div class="form-group">
				    <label for="newActivityType">Type</label>
				    <input type="text" class="form-control" id="newActivityType">
				</div>
				<div class="form-group">
				    <label for="newActivityUrl">Link</label>
				    <input type="url" class="form-control" id="newActivityUrl" placeholder="http://...">
				</div>
			</div>
	      </div>
	      <div class="modal-footer">
	        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
	        <button type="button" class="btn btn-primary" onclick="submitActivityForm()">Confirm</button>
	      </div>
	    </div>
	  </div>
	</div>

    {% endblock %}
    {% block extra-scripts %}
    <!--<script src="/static/js/snap/dist/snap.svg-min.js"></script>-->
	<!--<script src="http://medialize.github.io/jQuery-contextMenu/src/jquery.contextMenu.js" type="text/javascript"></script>-->
	<!--<script src="{% static 'js/graph.js' %}"></script>-->

	<script src="{% static 'js/raphael.js' %}"></script>
	<script src="{% static 'grapheditor/init.js' %}"></script>

	<script>
    //Building a dictionary of activities
    {% for act in activities %}
        all_activities["{{ act.pk }}"] = ["{{ act.name|safe }}", "{{ act.type|safe }}", "{{ act.source|safe }}"];
    {% endfor %}
    //Building a dictionary of scenarios
    {% for sce in scenarios %}
        all_scenarios["{{ sce.pk }}"] = ["{{ sce }}"];
    {% endfor %}
	</script>

	<script src="{% static 'grapheditor/modeConnect.js' %}"></script>
	<script src="{% static 'grapheditor/modeErase.js' %}"></script>
	<script src="{% static 'grapheditor/modeMove.js' %}"></script>
	<script src="{% static 'grapheditor/modeAdd.js' %}"></script>
	<script src="{% static 'grapheditor/modeInspect.js' %}"></script>

    {% endblock %}
